# ä»£ç å¤åˆ¶åŠŸèƒ½å®ç°è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

æˆ‘å·²ç»ä¸ºæ‚¨å®ç°äº†è‡ªåŠ¨å¤åˆ¶ä»£ç å—çš„åŠŸèƒ½ã€‚å½“ AI ç”ŸæˆåŒ…å«ä»£ç å—çš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†ä»£ç å†…å®¹ï¼ˆä¸åŒ…å«è¡Œå·ï¼‰å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚

## å®ç°ç»†èŠ‚

### 1. ä¿®æ”¹çš„æ–‡ä»¶

- **`packages/cli/src/ui/utils/MarkdownDisplay.tsx`**
  - æ·»åŠ äº†è‡ªåŠ¨å¤åˆ¶åŠŸèƒ½åˆ° `RenderCodeBlock` ç»„ä»¶
  - å½“ä»£ç å—æ¸²æŸ“å®Œæˆæ—¶ï¼Œè‡ªåŠ¨å°†ä»£ç å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿
  - æ˜¾ç¤º "ğŸ“‹ Code copied to clipboard" æç¤ºä¿¡æ¯ï¼ˆ3ç§’åè‡ªåŠ¨æ¶ˆå¤±ï¼‰

- **`packages/cli/src/ui/utils/clipboardUtils.ts`**
  - æ·»åŠ äº†é€šç”¨çš„ `copyToClipboard` å‡½æ•°
  - æ”¯æŒè·¨å¹³å°å¤åˆ¶ï¼ˆmacOS, Windows, Linuxï¼‰

### 2. å·¥ä½œæµç¨‹

1. å½“ AI ç”ŸæˆåŒ…å«ä»£ç å—çš„å“åº”æ—¶
2. ä»£ç å—æ¸²æŸ“å®Œæˆåï¼ˆ`isPending = false`ï¼‰
3. è‡ªåŠ¨æå–çº¯ä»£ç å†…å®¹ï¼ˆä¸åŒ…å«è¡Œå·ï¼‰
4. å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿
5. æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçš„æç¤ºä¿¡æ¯

### 3. ç¤ºä¾‹

å‡è®¾ AI ç”Ÿæˆå¦‚ä¸‹é…ç½®ï¼š

```yaml
security:
  rsa:
    private-key: [æ‚¨çš„ Base64 æ ¼å¼ç§é’¥]
```

å½“è¿™ä¸ªä»£ç å—æ˜¾ç¤ºæ—¶ï¼š

- è¡Œå·ï¼ˆ1, 2, 3 ç­‰ï¼‰ä¼šæ˜¾ç¤ºåœ¨å·¦ä¾§
- ä½†å¤åˆ¶åˆ°å‰ªè´´æ¿çš„å†…å®¹åªåŒ…å«ï¼š
  ```
  security:
    rsa:
      private-key: [æ‚¨çš„ Base64 æ ¼å¼ç§é’¥]
  ```
- ä¸‹æ–¹ä¼šæ˜¾ç¤º "ğŸ“‹ Code copied to clipboard" æç¤º

### 4. ç‰¹æ€§

- âœ… è‡ªåŠ¨å¤åˆ¶ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- âœ… åªå¤åˆ¶ä»£ç å†…å®¹ï¼Œä¸å¤åˆ¶è¡Œå·
- âœ… æ”¯æŒæ‰€æœ‰ä»£ç è¯­è¨€
- âœ… è·¨å¹³å°æ”¯æŒï¼ˆmacOS/Windows/Linuxï¼‰
- âœ… å‹å¥½çš„ç”¨æˆ·æç¤º
- âœ… æ¯ä¸ªä»£ç å—åªå¤åˆ¶ä¸€æ¬¡ï¼ˆé¿å…é‡å¤å¤åˆ¶ï¼‰

## ä½¿ç”¨æ–¹æ³•

å½“æ‚¨çœ‹åˆ° AI ç”Ÿæˆçš„ä»£ç å—æ—¶ï¼š

1. ä»£ç ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
2. æ‚¨ä¼šçœ‹åˆ° "ğŸ“‹ Code copied to clipboard" æç¤º
3. ç›´æ¥ä½¿ç”¨ `Ctrl+V` (Windows/Linux) æˆ– `Cmd+V` (macOS) ç²˜è´´å³å¯

## æŠ€æœ¯å®ç°

```typescript
// å…³é”®ä»£ç ç‰‡æ®µ
useEffect(() => {
  if (!isPending && content.length > 0 && !hasCopiedRef.current) {
    const codeText = content.join('\n');
    copyToClipboard(codeText)
      .then(() => {
        setIsCopied(true);
        hasCopiedRef.current = true;
        setTimeout(() => setIsCopied(false), 3000);
      })
      .catch(() => {
        // Silently fail if clipboard is not available
      });
  }
}, [isPending, content]);
```

è¿™æ ·ï¼Œæ‚¨å°±å¯ä»¥è½»æ¾å¤åˆ¶ AI ç”Ÿæˆçš„é…ç½®ã€ä»£ç ç­‰å†…å®¹ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒè¡Œå·è¢«å¤åˆ¶è¿›å»äº†ï¼
